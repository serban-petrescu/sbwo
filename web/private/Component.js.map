{"version":3,"sources":["Component.es6.js"],"names":["fnSuper","prototype","onAfterRendering","apply","arguments","getFileType","length","getMimeType","oFileUpload","attr","join","extend","metadata","manifest","init","setModel","createDeviceModel","createContextModel","createUserModel","setResourceBundle","getModel","getResourceBundle","attachLoginRedirector","_fixTargetTitles","getRouter","attachTitleChanged","document","title","oEvent","getParameter","initialize","getContentDensityClass","support","touch","sText","getText","ajaxError","oHandler","oXhr","parseInt","status","information","onClose","window","location","reload","oTargets","getTargets","each","_mTargets","sKey","oTarget","_oOptions","oInfo","formatter","sap","getObject"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA;;AAEA,QAAIA,UAAU,uBAAaC,SAAb,CAAuBC,gBAArC;AACA,2BAAaD,SAAb,CAAuBC,gBAAvB,GAA0C,YAAY;AAClDF,gBAAQG,KAAR,CAAc,IAAd,EAAoBC,SAApB;AACA,YAAI,KAAKC,WAAL,MAAsB,KAAKA,WAAL,GAAmBC,MAAzC,KAAoD,CAAC,KAAKC,WAAL,EAAD,IAAuB,CAAC,KAAKA,WAAL,GAAmBD,MAA/F,CAAJ,EAA4G;AACxG,qCAAO,KAAKE,WAAZ,EAAyBC,IAAzB,CAA8B,QAA9B,EAAwC,MAAM,KAAKJ,WAAL,GAAmBK,IAAnB,CAAwB,IAAxB,CAA9C;AACH;AACJ,KALD;;sBAOe,sBAAYC,MAAZ,CAAmB,iCAAnB,EAAsD;;AAEjEC,kBAAU;AACNC,sBAAU;AADJ,SAFuD;;AAMjE;;;;;AAKAC,YAXiE,kBAW1D;AACH;AACA,kCAAYb,SAAZ,CAAsBa,IAAtB,CAA2BX,KAA3B,CAAiC,IAAjC,EAAuCC,SAAvC;;AAEA;AACA,iBAAKW,QAAL,CAAc,iBAAOC,iBAAP,EAAd,EAA0C,QAA1C;;AAEA;AACA,iBAAKD,QAAL,CAAc,iBAAOE,kBAAP,EAAd,EAA2C,SAA3C;;AAEA;AACA,iBAAKF,QAAL,CAAc,iBAAOG,eAAP,EAAd,EAAwC,MAAxC;;AAEA;AACA,gCAAUC,iBAAV,CAA4B,KAAKC,QAAL,CAAc,MAAd,EAAsBC,iBAAtB,EAA5B;;AAEA;AACA,iBAAKC,qBAAL;;AAEA,iBAAKC,gBAAL;AACA,iBAAKC,SAAL,GAAiBC,kBAAjB,CAAoC;AAAA,uBAAUC,SAASC,KAAT,GAAiBC,OAAOC,YAAP,CAAoB,OAApB,CAA3B;AAAA,aAApC;AACA,iBAAKL,SAAL,GAAiBM,UAAjB;AACH,SAjCgE;;;AAmCjE;;;;AAIAC,8BAvCiE,oCAuCxC;AACrB,mBAAO,iBAAOC,OAAP,CAAeC,KAAf,GAAuB,eAAvB,GAAyC,kBAAhD;AACH,SAzCgE;;;AA2CjE;;;AAGAX,6BA9CiE,mCA8CzC;AACpB,gBAAMY,QAAQ,KAAKd,QAAL,CAAc,MAAd,EAAsBC,iBAAtB,GAA0Cc,OAA1C,CAAkD,+BAAlD,CAAd;AACA,qCAAOT,QAAP,EAAiBU,SAAjB,CAA2B,UAACC,QAAD,EAAWC,IAAX,EAAoB;AAC3C,oBAAIC,SAASD,KAAKE,MAAd,EAAsB,EAAtB,MAA8B,GAAlC,EAAuC;AACnC,yCAAWC,WAAX,CAAuBP,KAAvB,EAA8B;AAC1BQ,iCAAS;AAAA,mCAAMC,OAAOC,QAAP,CAAgBC,MAAhB,EAAN;AAAA;AADiB,qBAA9B;AAGH;AACJ,aAND;AAOH,SAvDgE;AAyDjEtB,wBAzDiE,8BAyD9C;AACf,gBAAIuB,WAAW,KAAKtB,SAAL,GAAiBuB,UAAjB,EAAf;AACA,gCAAOC,IAAP,CAAYF,SAASG,SAArB,EAAgC,UAACC,IAAD,EAAOC,OAAP,EAAmB;AAC/C,oBAAIA,QAAQC,SAAR,IAAqBD,QAAQC,SAAR,CAAkBzB,KAA3C,EAAkD;AAC9C,wBAAI0B,QAAQF,QAAQC,SAAR,CAAkBzB,KAA9B;AACA,wBAAI0B,SAASA,MAAMC,SAAnB,EAA8B;AAC1BD,8BAAMC,SAAN,GAAkB,oBAAOC,GAAP,CAAWC,SAAX,CAAqBH,MAAMC,SAA3B,CAAlB;AACH;AACJ;AACJ,aAPD;AAQH;AAnEgE,KAAtD,C","file":"Component.js","sourcesContent":["import UIComponent from \"sap/ui/core/UIComponent\";\r\nimport Device from \"sap/ui/Device\";\r\nimport models from \"spet/sbwo/web/private/model/models\";\r\nimport formatter from \"spet/sbwo/web/private/model/formatter\";\r\nimport FileUploader from \"sap/ui/unified/FileUploader\";\r\nimport MessageBox from \"sap/m/MessageBox\";\r\nimport jQuery from \"jquery.sap.global\";\r\nimport globals from \"spet/sbwo/web/private/util/globals\";\r\n\r\nglobals();\r\n\r\nlet fnSuper = FileUploader.prototype.onAfterRendering;\r\nFileUploader.prototype.onAfterRendering = function () {\r\n    fnSuper.apply(this, arguments);\r\n    if (this.getFileType() && this.getFileType().length && (!this.getMimeType() || !this.getMimeType().length)) {\r\n        jQuery(this.oFileUpload).attr(\"accept\", \".\" + this.getFileType().join(\",.\"));\r\n    }\r\n};\r\n\r\nexport default UIComponent.extend(\"spet.sbwo.web.private.Component\", {\r\n\r\n    metadata: {\r\n        manifest: \"json\"\r\n    },\r\n\r\n    /**\r\n     * The component is initialized by UI5 automatically during the startup of the app and calls the init method once.\r\n     * @public\r\n     * @override\r\n     */\r\n    init() {\r\n        // call the base component's init function\r\n        UIComponent.prototype.init.apply(this, arguments);\r\n\r\n        // set the device model\r\n        this.setModel(models.createDeviceModel(), \"device\");\r\n\r\n        // set the context model\r\n        this.setModel(models.createContextModel(), \"context\");\r\n\r\n        // set the user model\r\n        this.setModel(models.createUserModel(), \"user\");\r\n\r\n        // put the bundle in the formatter\r\n        formatter.setResourceBundle(this.getModel(\"i18n\").getResourceBundle());\r\n\r\n        // attach the redirect handler\r\n        this.attachLoginRedirector();\r\n\r\n        this._fixTargetTitles();\r\n        this.getRouter().attachTitleChanged(oEvent => document.title = oEvent.getParameter(\"title\"));\r\n        this.getRouter().initialize();\r\n    },\r\n\r\n    /**\r\n     * Returns the content density class based on the current device.\r\n     * @returns {string}\tThe name of the CSS class.\r\n     */\r\n    getContentDensityClass() {\r\n        return Device.support.touch ? \"sapUiSizeCozy\" : \"sapUiSizeCompact\";\r\n    },\r\n\r\n    /**\r\n     * Attaches a login redirect error handler.\r\n     */\r\n    attachLoginRedirector() {\r\n        const sText = this.getModel(\"i18n\").getResourceBundle().getText(\"txtLoggedOutAutomaticallyText\");\r\n        jQuery(document).ajaxError((oHandler, oXhr) => {\r\n            if (parseInt(oXhr.status, 10) === 403) {\r\n                MessageBox.information(sText, {\r\n                    onClose: () => window.location.reload()\r\n                });\r\n            }\r\n        });\r\n    },\r\n\r\n    _fixTargetTitles() {\r\n        let oTargets = this.getRouter().getTargets();\r\n        jQuery.each(oTargets._mTargets, (sKey, oTarget) => {\r\n            if (oTarget._oOptions && oTarget._oOptions.title) {\r\n                let oInfo = oTarget._oOptions.title;\r\n                if (oInfo && oInfo.formatter) {\r\n                    oInfo.formatter = jQuery.sap.getObject(oInfo.formatter);\r\n                }\r\n            }\r\n        });\r\n    }\r\n});\r\n"]}