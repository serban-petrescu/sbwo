{"version":3,"sources":["DeletedEntityList.controller.es6.js"],"names":["extend","onInit","prototype","apply","arguments","buildViewModel","selection","getEntityRoute","oContext","getRouteForEntityType","getProperty","getListRoute","onRouteMatched","onDataReceived","onSelectionChange","oEvent","getModel","setProperty","getSource","getSelectedItems","length","getSelectionEntities","aItems","byId","aData","map","oItem","getBindingContext","id","type","onDeleteSelected","ajax","method","url","contentType","data","JSON","stringify","success","onRestoreSelected","put","onDeleteAll","del","refresh","clearSelection","removeSelections"],"mappings":";;;;;;;;;;;;;;;;;;sBAGe,eAAKA,MAAL,CAAY,yDAAZ,EAAuE;AAClFC,cADkF,oBACzE;AACL,2BAAKC,SAAL,CAAeD,MAAf,CAAsBE,KAAtB,CAA4B,IAA5B,EAAkCC,SAAlC;AACA,iBAAKC,cAAL,CAAoB;AAChBC,2BAAW;AADK,aAApB;AAGH,SANiF;AAQlFC,sBARkF,0BAQnEC,QARmE,EAQzD;AACrB,mBAAO,KAAKC,qBAAL,CAA2BD,SAASE,WAAT,CAAqB,MAArB,CAA3B,CAAP;AACH,SAViF;AAYlFC,oBAZkF,0BAYnE;AACX,mBAAO,cAAP;AACH,SAdiF;AAgBlFC,sBAhBkF,4BAgBjE;AACb,2BAAKV,SAAL,CAAeU,cAAf,CAA8BT,KAA9B,CAAoC,IAApC,EAA0CC,SAA1C;AACA,iBAAKS,cAAL;AACH,SAnBiF;AAqBlFC,yBArBkF,6BAqBhEC,MArBgE,EAqBxD;AACtB,iBAAKC,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,YAAlC,EAAgDF,OAAOG,SAAP,GAAmBC,gBAAnB,GAAsCC,MAAtC,GAA+C,CAA/F;AACH,SAvBiF;AAyBlFC,4BAzBkF,kCAyB3D;AACnB,gBAAIC,SAAS,KAAKC,IAAL,CAAU,SAAV,EAAqBJ,gBAArB,EAAb;AAAA,gBACIK,QAAQF,OAAOG,GAAP,CAAW,iBAAS;AACxB,oBAAIjB,WAAWkB,MAAMC,iBAAN,EAAf;AACA,uBAAO;AACHC,wBAAIpB,SAASE,WAAT,CAAqB,IAArB,CADD;AAEHmB,0BAAMrB,SAASE,WAAT,CAAqB,MAArB;AAFH,iBAAP;AAIH,aANO,CADZ;AAQA,mBAAOc,KAAP;AACH,SAnCiF;AAqClFM,wBArCkF,8BAqC/D;AAAA;;AACf,gCAAOC,IAAP,CAAY;AACRC,wBAAQ,QADA;AAERC,qBAAK,gCAFG;AAGRC,6BAAa,kBAHL;AAIRC,sBAAMC,KAAKC,SAAL,CAAe,KAAKhB,oBAAL,EAAf,CAJE;AAKRiB,yBAAS;AAAA,2BAAM,MAAKzB,cAAL,EAAN;AAAA;AALD,aAAZ;AAOH,SA7CiF;AA+ClF0B,yBA/CkF,+BA+C9D;AAChB,iBAAKC,GAAL,CAAS,iCAAT,EAA4C,KAAKnB,oBAAL,EAA5C,EAAyE,KAAKR,cAA9E;AACH,SAjDiF;AAmDlF4B,mBAnDkF,yBAmDpE;AACV,iBAAKC,GAAL,CAAS,oCAAT,EAA+C,KAAK7B,cAApD;AACH,SArDiF;AAuDlFA,sBAvDkF,4BAuDjE;AACb,iBAAKG,QAAL,GAAgB2B,OAAhB;AACA,iBAAKC,cAAL;AACH,SA1DiF;AA4DlFA,sBA5DkF,4BA4DlE;AACZ,iBAAKrB,IAAL,CAAU,SAAV,EAAqBsB,gBAArB,CAAsC,IAAtC;AACA,iBAAK7B,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,YAAlC,EAAgD,KAAhD;AACH;AA/DiF,KAAvE,C","file":"DeletedEntityList.controller.js","sourcesContent":["import Base from \"./Base\";\r\nimport jQuery from \"jquery.sap.global\";\r\n\r\nexport default Base.extend(\"spet.sbwo.web.private.controller.list.DeletedEntityList\", {\r\n    onInit() {\r\n        Base.prototype.onInit.apply(this, arguments);\r\n        this.buildViewModel({\r\n            selection:\tfalse\r\n        });\r\n    },\r\n\r\n    getEntityRoute(oContext) {\r\n        return this.getRouteForEntityType(oContext.getProperty(\"Type\"));\r\n    },\r\n\r\n    getListRoute() {\r\n        return \"deleted-list\";\r\n    },\r\n\r\n    onRouteMatched() {\r\n        Base.prototype.onRouteMatched.apply(this, arguments);\r\n        this.onDataReceived();\r\n    },\r\n\r\n    onSelectionChange(oEvent) {\r\n        this.getModel(\"view\").setProperty(\"/selection\", oEvent.getSource().getSelectedItems().length > 0);\r\n    },\r\n\r\n    getSelectionEntities() {\r\n        var aItems = this.byId(\"lstMain\").getSelectedItems(),\r\n            aData = aItems.map(oItem => {\r\n                var oContext = oItem.getBindingContext();\r\n                return {\r\n                    id:\toContext.getProperty(\"Id\"),\r\n                    type: oContext.getProperty(\"Type\")\r\n                };\r\n            });\r\n        return aData;\r\n    },\r\n\r\n    onDeleteSelected() {\r\n        jQuery.ajax({\r\n            method: \"DELETE\",\r\n            url: \"/private/api/rest/trash/delete\",\r\n            contentType: \"application/json\",\r\n            data: JSON.stringify(this.getSelectionEntities()),\r\n            success: () => this.onDataReceived()\r\n        });\r\n    },\r\n\r\n    onRestoreSelected() {\r\n        this.put(\"/private/api/rest/trash/restore\", this.getSelectionEntities(), this.onDataReceived);\r\n    },\r\n\r\n    onDeleteAll() {\r\n        this.del(\"/private/api/rest/trash/delete/all\", this.onDataReceived);\r\n    },\r\n\r\n    onDataReceived() {\r\n        this.getModel().refresh();\r\n        this.clearSelection();\r\n    },\r\n\r\n    clearSelection(){\r\n        this.byId(\"lstMain\").removeSelections(true);\r\n        this.getModel(\"view\").setProperty(\"/selection\", false);\r\n    }\r\n\r\n});\r\n\r\n"]}