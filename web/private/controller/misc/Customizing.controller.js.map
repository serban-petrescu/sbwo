{"version":3,"sources":["Customizing.controller.es6.js"],"names":["extend","onInit","oBundle","getResourceBundle","sClass","getOwnerComponent","getContentDensityClass","buildViewModel","busy","destinations","location","title","getText","icon","tooltip","dialog","target","text","separator","header","court","getModel","securityTokenAvailable","then","setProperty","sToken","byId","getDependents","forEach","oD","addStyleClass","formatUploadUrl","sPattern","sSeparator","bHeader","sap","formatMessage","encodeURIComponent","onOpenUploadSheet","oEvent","openBy","getSource","onOpenUploadDialog","sPath","getBindingContext","getPath","oDialog","bindElement","model","path","open","onCloseUploadDialog","close","onUploadStart","upload","onUploadComplete","getParameter","success","onInternalServerError","refresh"],"mappings":"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","file":"Customizing.controller.js","sourcesContent":["import Base from \"spet/sbwo/web/private/controller/Base\";\r\nimport MessageBox from \"sap/m/MessageBox\";\r\nimport jQuery from \"jquery.sap.global\";\r\n\r\nexport default Base.extend(\"spet.sbwo.web.private.controller.misc.Customizing\", {\r\n    onInit() {\r\n        var oBundle = this.getResourceBundle(),\r\n            sClass = this.getOwnerComponent().getContentDensityClass();\r\n\r\n        this.buildViewModel({\r\n            busy: false,\r\n            destinations: {\r\n                location: {\r\n                    title: oBundle.getText(\"btnCustomizingUploadLocationsText\"),\r\n                    icon: \"sap-icon://excel-attachment\",\r\n                    tooltip: oBundle.getText(\"btnCustomizingUploadLocationsText\"),\r\n                    dialog: {\r\n                        target: \"/private/api/rest/import/locations/{0}/{1}\",\r\n                        text: oBundle.getText(\"btnCustomizingUploadLocationsDescription\"),\r\n                        separator: \",\",\r\n                        header: false\r\n                    }\r\n                },\r\n                court: {\r\n                    title: oBundle.getText(\"btnCustomizingUploadCourtsText\"),\r\n                    icon: \"sap-icon://excel-attachment\",\r\n                    tooltip: oBundle.getText(\"btnCustomizingUploadCourtsText\"),\r\n                    dialog: {\r\n                        target: \"/private/api/rest/import/courts/{0}/{1}\",\r\n                        text: oBundle.getText(\"btnCustomizingUploadCourtsDescription\"),\r\n                        separator: \",\",\r\n                        header: false\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        this.getOwnerComponent().getModel().securityTokenAvailable()\r\n            .then(sToken => this.getModel(\"view\").setProperty(\"/securityToken\", sToken));\r\n\r\n        this.byId(\"pagCustomizing\").getDependents()\r\n            .forEach(oD => oD.addStyleClass(sClass));\r\n    },\r\n\r\n    formatUploadUrl(sPattern, sSeparator, bHeader) {\r\n        if (sPattern) {\r\n            return jQuery.sap.formatMessage(sPattern, [encodeURIComponent(sSeparator), bHeader + \"\"]);\r\n        } else {\r\n            return \"\";\r\n        }\r\n    },\r\n\r\n    onOpenUploadSheet(oEvent) {\r\n        this.byId(\"actUploadDestination\").openBy(oEvent.getSource());\r\n    },\r\n\r\n    onOpenUploadDialog(oEvent) {\r\n        var sPath = oEvent.getSource().getBindingContext(\"view\").getPath(),\r\n            oDialog = this.byId(\"dlgUpload\");\r\n        oDialog.bindElement({\r\n            model: \"view\",\r\n            path: sPath + \"/dialog\"\r\n        });\r\n        oDialog.open();\r\n    },\r\n\r\n    onCloseUploadDialog() {\r\n        this.byId(\"dlgUpload\").close();\r\n    },\r\n\r\n    onUploadStart() {\r\n        this.getModel(\"view\").setProperty(\"/busy\", true);\r\n        this.byId(\"fupCustomizing\").upload();\r\n    },\r\n\r\n    onUploadComplete(oEvent) {\r\n        var oBundle = this.getResourceBundle();\r\n        this.getModel(\"view\").setProperty(\"/busy\", false);\r\n        if (oEvent.getParameter(\"status\") === 204) {\r\n            MessageBox.success(oBundle.getText(\"txtCustomizingUploadSuccessText\"));\r\n        } else {\r\n            this.onInternalServerError(oEvent.getParameter(\"responseRaw\"));\r\n        }\r\n        this.getModel().refresh();\r\n        this.byId(\"dlgUpload\").close();\r\n    }\r\n});\r\n"]}